<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hedian.mapper.FmsMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.hedian.entity.Fms">
        <id column="fms_id" property="fmsId"/>
        <result column="fms_name" property="fmsName"/>
        <result column="fms_desc" property="fmsDesc"/>
        <result column="dept_id" property="deptId"/>
        <result column="user_id" property="userId"/>
        <result column="dispatchflag" property="dispatchflag"/>
        <result column="grp_id" property="grpId"/>
        <result column="fms_status" property="fmsStatus"/>
        <result column="begin_time" property="beginTime"/>
        <result column="end_time" property="endTime"/>
        <result column="showorder" property="showorder"/>
        <result column="useflag" property="useflag"/>
        <result column="delflag" property="delflag"/>
        <result column="user_id_create" property="userIdCreate"/>
        <result column="gmt_create" property="gmtCreate"/>
        <result column="user_id_mod" property="userIdMod"/>
        <result column="gmt_modified" property="gmtModified"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        fms_id AS fmsId, fms_name AS fmsName, fms_desc AS fmsDesc, dept_id AS deptId, user_id AS userId, dispatchflag, grp_id AS grpId, fms_status AS fmsStatus, begin_time AS beginTime, end_time AS endTime, showorder, useflag, delflag, user_id_create AS userIdCreate, gmt_create AS gmtCreate, user_id_mod AS userIdMod, gmt_modified AS gmtModified
    </sql>
    <select id="selectPageByConfidition" resultType="com.hedian.entity.Fms">
        SELECT fm.*,sd.name AS deptName,su.name AS userName,sg.grp_name FROM tbl_fms fm
        INNER JOIN sys_dept sd on fm.dept_id = sd.dept_id
        INNER JOIN sys_user su on fm.user_id = su.user_id
        INNER JOIN sys_group sg on fm.grp_id = sg.grp_id
        WHERE fm.useflag = 1
        <if test="fmsName != null and fmsName != ''">
            and fm.fmsName=#{beginTime}
        </if>
        <if test="deptName != null and deptName != ''">
            and sd.name=#{deptName}
        </if>
        <if test="userName != null and userName != ''">
            and su.name=#{userName}
        </if>
        <if test="dispatchflag != null">
            and fm.dispatchflag=#{dispatchflag}
        </if>
        <if test="grpName != null and grpName != ''">
            and sg.grp_name=#{grpName}
        </if>
        <if test="fmsStatus != null">
            and fm.fms_status=#{fmsStatus}
        </if>
    </select>

</mapper>
